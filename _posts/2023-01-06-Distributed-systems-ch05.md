---
layout: post
title: 第五章 复制
categories: Distributed-Systems
tags: [Distributed-Systems]
---

## 五、复制

现在我们来谈谈复制的问题，即在多个节点上维护相同数据的副本，这些节点被称为replica。复制是许多分布式数据库、文件系统和其他存储系统的标准功能。这是我们实现容错的主要机制之一：如果一个副本出现故障，我们可以继续访问其他replica上的数据副本。

> #### 复制（Replication）
>
> 在多个节点上保留相同数据的副本
> * 数据库、文件系统、缓存. . .
> * 拥有数据副本的节点称为**replica**
> * 如果某些replica出现故障，其他replica仍然可以访问
> * 将负载分散到多个replica
> * 如果数据没有改变就很容易：只需复制它
> * 我们将专注于数据变化
> 
> 与 **RAID（独立磁盘冗余阵列）**相比：单台计算机内的复制
> * RAID具有单一控制器；在分布式系统中，每个节点独立行动
> * Replica可以分布在世界各地，靠近用户

### 5.1 操纵远程状态

如果数据没有变化，复制就很容易，因为它只需要制作一份数据的一次性副本。因此，复制中的主要问题是对数据的更改进行管理。在深入了解复制的细节之前，让我们先看看分布式系统中的数据更改是如何发生的。

> #### 重试状态更新
>
> **用户A：**月亮其实不是奶酪做的！
> 喜欢：12300用户喜欢这条评论
>
> <img src="../../../../assets/images/distributed-system/slide88.png" style="zoom:33%;" />
>
> 删除重复请求要求数据库跟踪它已经看到的请求（在稳定存储中）
>
> **Slide 88**

让我们以“喜欢”社交网络上的状态更新为例。当您单击“喜欢”按钮时，您喜欢它的事实以及喜欢它的人数需要存储在某个地方，以便可以向您和其他用户显示。这通常发生在社交网络服务器上的数据库中。我们可以将存储在数据库中的数据视为其**状态（state）**。
